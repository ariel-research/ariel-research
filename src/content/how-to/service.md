<div dir="rtl" lang="he">

# שירות לכל סטודנט
## מדריך הפעלה

### דרישות:
Linux command line.

### התחברות לשרת
כדי להתחבר לשרת עליכם להזין בטרמינל את השורה הבאה:
```
ssh <username>@csariel.xyz
```


### הפעלת האפליקציה שלכם
1. התחברו למשתמש שלכם בשרת. לאחר ההתחברות המיקום שלכם הוא בתקיית הבית:
	```
	\home\<username>
	```
2. כעת, שכפלו את האפליקציה שלכם לתוך תקיה חדשה בשם `app` בעזרת הפקודה:
	```
	git clone https://github.com/<git-user-name>/<git-user-repo> app
	```
3. הכנסו לתקיה בעזרת הפקודה:
	```
	cd app
	```
4. צרו סביבה וירטואלית בשם `venv`:
	```
	python3 -m venv venv
	```
5. הפעילו את הסביבה:
	```
	source venv/bin/activate
	```
6. התקינו את החבילות מתוך קובץ הדרישות שלכם `requirements.txt`:
	```
	pip install -r requirements.txt
	```
7. אל תשכחו להוסיף קבצים הכרחיים שלא נמצאים בגיט כמו credentials וסיסמאות נוספות.\
	האפשרות הפשוטה היא ליצור קובץ בתקיה. לדוגמא:
	```
	nano credentials.json
	```
	יפתח בפניכם עורך טקסט. העתיקו לתוכו את תוכן הקובץ מהמחשב שלכם ושמרו בעזרת ctrl+x. תמיד תוכלו לחזור לערוך אותו בעזרת אותה פקודה.
8. הריצו את האפליקציה שלכם כמו שעשיתם בעבר, והכנסו לכתובת עם הפורט שבחרתם: 
	```
	http://csariel.xyz:<your-port>
	```
	> אם קיבלתם הודעה שהפורט תפוס, נסו לשנות את הפורט שבחרתם בקובץ ולהריץ שוב. אין חשיבות לפורט הנבחר מעבר לשלב הזה.
9. לאחר שווידאתם שהאפליקציה שלכם עובדת כראוי,  אתם יכולים להפסיק את הרצתה.

### הרצת האפליקציה ברקע
מרגע יצירת המשתמש שלכם, נוסף עבורכם קובץ שמוגדר כ'שירות' בשרת. 
אותו שירות מריץ את האפליקציה שלכם ע"י Gunicron - שרת ווב שמייעל הרצת אפליקציות הכתובות בפייתון.

על מנת שתוכלו להשתמש בשירות כראוי, עליכם להגדיר כמה דברים:
1. וודאו כי שם הקובץ שאותו אתם מריצים על מנת שהאפליקציה תפעל הוא `app.py` .
אם לא, שנו את שם הקובץ. (הקובץ `app.py` אמור להיות בתיקייה `app` שבתיקיית הבית שלכם).
2. התקינו את החבילה `gunicorn` כאשר הסביבה הוירטואלית שלכם פעילה: \
(חזרו לשלב 5 בסעיף הקודם כדי להפעיל אותה)
	```
	pip install gunicorn
	```
3.  מעתה אתם הולכים להשתמש בשירות שלכם ע"י הפקודה `myservice`. על מנת שהפקודה תעבוד **חובה** להוסיף `sudo` בתחילת הפקודה.
4. הפעילו את השירות שלכם:
	```
	sudo myservice start
	```
    > בשלב זה קובץ בשם `app.sock` יווצר בתקית הפרויקט שלכם. גם כאן, הימענו מלגעת בו.
5. וודאו שהשירות פעיל:
	```
	sudo myservice status
	```
	אם השירות מסומן כ**active** בצבע ירוק - הוא פועל כראוי. \
	אם הוא מסומן כ**failed** בצבע אדום - הוא נכשל בשל שגיאה, לכן חזרו אחרי ההוראות ובדקו שבצעתם את כל השלבים. אם בכל זאת נתקעתם, צרו איתנו קשר.
6. ניתן לבצע פעולות נוספות על השירות:
	- `sudo myservice stop` - להפסיק את השירות
	- `sudo myservice restart` - להפעיל מחדש 
	את השירות
	- `sudo myservice log` - לצפות בקובץ הלוגים. שם תוכלו לחפש את מקור השגיאות ולדבג את הקוד שלכם.
	

### פריסת האפליקציה
לכל שירות נוצר קובץ קונפיגורציה של Nginx (שרת ווב), בו נכתב בין היתר שם האתר שלכם, ודרך איזה socket הוא עובר.

שם האתר שלכם נקבע לפי שם המשתמש ועם סיומת שם הדומיין שלנו.
כלומר: 
```
<username>.csariel.xyz
```
הכנסו לכתובת האתר שלכם בדפדפן ו...

זהו! מקווים שברגע הזה הצלחתם לראות את האפליקציה שלכם רצה :)

## צרו קשר
אם נתקלתם בבעיה, מוזמנים לשלוח מייל לכתובת support@csariel.xyz,
עם שם השירות שלכם ותיאור הבעיה (מומלץ לצרף צילום מסך). 
